---
import Layout from "../layouts/Layout.astro";
import PricingSection from "../components/PricingSection";
---

<Layout>
  <PricingSection client:load />
</Layout>

<style>
  /* 3D perspective transforms */
  .perspective-1000 {
    perspective: 1000px;
    transform-style: preserve-3d;
  }

  /* Enhancing 3D effect with custom properties */
  .pricing-card {
    backface-visibility: hidden;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* Enhanced rotation effects */
  .rotate-y-5:hover {
    transform: rotateY(5deg) scale(1.05) translateZ(20px);
  }

  .translate-z-10:hover {
    transform: translateZ(10px) scale(1.05);
  }

  .translate-z-12:hover {
    transform: translateZ(12px) scale(1.15);
  }

  .scale-115:hover {
    transform: scale(1.15) translateZ(30px);
  }

  /* Float animations with enhanced 3D depth */
  @keyframes float {
    0% {
      transform: translateY(0) rotate(0) translateZ(0);
    }
    50% {
      transform: translateY(-10px) rotate(2deg) translateZ(20px);
    }
    100% {
      transform: translateY(0) rotate(0) translateZ(0);
    }
  }

  /* Apply subtle float animation to pricing cards */
  .pricing-card {
    animation: float 6s infinite ease-in-out;
    animation-delay: calc(var(--index, 0) * 2s);
  }

  /* Enhanced pulse animation for price tags */
  @keyframes pulse {
    0% {
      opacity: 0.2;
      transform: scale(1) translateZ(0);
    }
    50% {
      opacity: 0.3;
      transform: scale(1.05) translateZ(5px);
    }
    100% {
      opacity: 0.2;
      transform: scale(1) translateZ(0);
    }
  }

  .pulse-animation {
    animation: pulse 2s infinite ease-in-out;
  }

  /* Feature item hover effects with 3D depth */
  .feature-item {
    position: relative;
    transition: all 0.3s ease;
    transform-style: preserve-3d;
  }

  .feature-item::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: currentColor;
    transition: width 0.3s ease;
    transform: translateZ(1px);
  }

  .feature-item:hover::after {
    width: 100%;
  }

  /* 3D depth for buttons */
  button {
    transform-style: preserve-3d;
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
  }

  button:hover {
    transform: translateY(-2px) translateZ(20px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  }

  /* Add enhanced shadows to create depth */
  .pricing-card {
    box-shadow:
      0 10px 30px rgba(0, 0, 0, 0.05),
      0 1px 5px rgba(0, 0, 0, 0.03);
  }

  .pricing-card:hover {
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.1),
      0 10px 15px rgba(0, 0, 0, 0.05);
  }

  /* Add glow effect on hover */
  .pricing-card::before {
    content: "";
    position: absolute;
    inset: -10px;
    background: radial-gradient(
      circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(255, 255, 255, 0.15),
      transparent 60%
    );
    border-radius: 3.5rem;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .pricing-card:hover::before {
    opacity: 1;
  }
</style>

<script>
  // Add staggered animation delay for cards
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".pricing-card");
    cards.forEach((card, index) => {
      card.style.setProperty("--index", index);
    });

    // Add glow effect tracking
    cards.forEach((card) => {
      card.addEventListener("mousemove", (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left; // x position within the element
        const y = e.clientY - rect.top; // y position within the element

        // Update CSS variables for glow effect position
        card.style.setProperty("--mouse-x", `${(x / rect.width) * 100}%`);
        card.style.setProperty("--mouse-y", `${(y / rect.height) * 100}%`);
      });
    });

    // Add mousemove parallax effect to container
    const container = document.querySelector(".perspective-1000");
    if (container) {
      container.addEventListener("mousemove", (e) => {
        const cards = document.querySelectorAll(".pricing-card");
        const rect = container.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        // Calculate rotation based on mouse position
        const rotateY = (mouseX - centerX) / 50;
        const rotateX = (centerY - mouseY) / 50;

        cards.forEach((card, index) => {
          // Apply different rotation intensity based on card position
          const modifier = index === 1 ? 0.5 : 1; // Less rotation for featured card
          card.style.transform = `rotateY(${rotateY * modifier}deg) rotateX(${rotateX * modifier}deg) translateZ(${10 * modifier}px)`;
        });
      });

      // Reset on mouse leave
      container.addEventListener("mouseleave", () => {
        const cards = document.querySelectorAll(".pricing-card");
        cards.forEach((card) => {
          card.style.transform = "rotateY(0) rotateX(0) translateZ(0)";
        });
      });
    }
  });
</script>
